(self["webpackChunkgutar"]=self["webpackChunkgutar"]||[]).push([[924],{958:function(e){e.exports={chordMap:{C:[{fret:1,string:2,finger:1},{fret:2,string:4,finger:2},{fret:3,string:5,finger:3}],D:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],E:[{fret:1,string:3,finger:1},{fret:2,string:4,finger:2},{fret:2,string:5,finger:3}],F:[{fret:1,string:1,finger:1},{fret:1,string:2,finger:1},{fret:1,string:6,finger:1},{fret:2,string:3,finger:2},{fret:3,string:5,finger:3},{fret:3,string:4,finger:3}],G:[{fret:2,string:5,finger:2},{fret:3,string:6,finger:3},{fret:3,string:1,finger:4}],A:[{fret:2,string:4,finger:2},{fret:2,string:3,finger:3},{fret:2,string:2,finger:4}],B:[{fret:2,string:1,finger:1},{fret:2,string:5,finger:1},{fret:2,string:6,finger:1},{fret:4,string:2,finger:2},{fret:4,string:3,finger:3},{fret:4,string:4,finger:4}],Am:[{fret:1,string:2,finger:1},{fret:2,string:3,finger:2},{fret:2,string:4,finger:3}],Dm:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],Em:[{fret:2,string:4,finger:1},{fret:2,string:5,finger:2}]},enabledChord:["C","D","E","F","G","A","B","Am","Dm","Em"],pitchNames:[[{number:3,topDot:1},{number:4,topDot:1},{number:4,topDot:1,half:1},{number:5,topDot:1}],[{number:7},{number:1,topDot:1},{number:1,topDot:1,half:1},{number:2,half:1}],[{number:5},{number:5,half:1},{number:6},{number:6,half:1}],[{number:2},{number:2,half:1},{number:3},{number:4}],[{number:6,bottomDot:1},{number:6,bottomDot:1,half:1},{number:7,bottomDot:1},{number:1}],[{number:3,bottomDot:1},{number:4,bottomDot:1},{number:4,bottomDot:1,half:1},{number:5,bottomDot:1}]]}},7924:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ae}});r(4114);var i=r(6768),n=r(144),a=r(958),s=r.n(a),o=r(4232);const l=e=>((0,i.Qi)("data-v-2eb72a0d"),e=e(),(0,i.jt)(),e),c={class:"chord-box"},u={class:"chord-name"},d={class:"chord-content"},f=l((()=>(0,i.Lk)("div",{class:"chord-sign"},null,-1))),m={class:"chord-table"},g={class:"chord-fret"},b={key:0,class:"string-dot"};var k={__name:"chord",props:{name:{required:!0,type:String}},setup(e){const t=(0,n.Kh)({maxFret:3,fretInfo:{}}),r=e,s=()=>{const e=a.chordMap[r.name];if(void 0===e)return;let i={},n=0;for(let t=0;t<e.length;t++){const r=e[t].fret;n=r>n?r:n;const a=e[t].string,s=e[t].finger;void 0===i[r]&&(i[r]={}),i[r][a]=s}t.maxFret=n<3?3:n,t.fretInfo=i};return s(),(r,n)=>((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",u,(0,o.v_)(e.name),1),(0,i.Lk)("div",d,[f,(0,i.Lk)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.maxFret,(e=>((0,i.uX)(),(0,i.CE)("div",g,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(6,(r=>(0,i.Lk)("div",{class:(0,o.C4)(["chord-string",6===r?"chord-string-last":""])},[t.fretInfo[e]&&void 0!==t.fretInfo[e][7-r]?((0,i.uX)(),(0,i.CE)("div",b)):(0,i.Q3)("",!0)],2))),64))])))),256))])])]))}},v=r(1241);const h=(0,v.A)(k,[["__scopeId","data-v-2eb72a0d"]]);var p=h;const y={class:"item"},L={class:"item-animation"},T={class:"score-name"};var S={__name:"tap-number",props:{value:{required:!0,type:Number},duration:{required:!0,type:Number},delay:{required:!1,default:0,type:Number},itemKey:{required:!0,type:String}},setup(e,{expose:t}){const r=["miss","good","great","perfect"],a=(new Date).getTime(),s=(0,n.Kh)({result:void 0,continueTime:0,scoreBoxSize:0,start:!1,isPause:!0});let l=()=>{};const c=e,u=e=>{if(s.isPause||!s.start||void 0!==s.result)return;s.continueTime=(new Date).getTime()-a;const t=s.continueTime/c.duration,i=t>=1?0:1-t,n=20+Math.floor(20*i);s.scoreBoxSize=n+n%2,s.result=r[e],l()};let d,f=0,m=0;const g=()=>{s.start=!0,void 0!==d&&clearTimeout(d),s.isPause?f=(new Date).getTime()-m:(m=(new Date).getTime(),d=setTimeout((()=>{u(0)}),c.duration-f))};let b,k=0,v=0;const h=()=>{s.isPause&&(s.isPause=!1,v=(new Date).getTime(),c.delay>k?b=setTimeout((()=>{g()}),c.delay-k):g())},p=()=>{s.isPause||(s.isPause=!0,void 0!==b&&clearTimeout(b),k=(new Date).getTime()-v)},S=()=>{s.isPause?h():p()},N=()=>!s.isPause,x=e=>{l=e},C=()=>c.itemKey;return t({setScore:u,isRunning:N,run:h,pause:p,togglePause:S,setEndMethod:x,getItemKey:C}),(t,r)=>((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",L,[s.start&&void 0===s.result?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,o.C4)(["item-circle",s.isPause?"animation-pause":"animation-running"]),style:(0,o.Tr)({animation:`circle-close ${c.duration/1e3}s linear`})},null,6)):(0,i.Q3)("",!0),void 0!==s.result?((0,i.uX)(),(0,i.CE)("div",{key:1,style:(0,o.Tr)(`width:${s.scoreBoxSize}px;height:${s.scoreBoxSize}px;margin-top:${1-s.scoreBoxSize/2}px`),class:(0,o.C4)(["item-result",`item-result-${s.result}`])},[(0,i.Lk)("span",T,(0,o.v_)(s.result),1)],6)):(0,i.Q3)("",!0)]),(0,i.Lk)("span",{style:{display:"block",width:"100%"},class:(0,o.C4)(void 0!==s.result?`number-${s.result}`:"")},(0,o.v_)(e.value),3)]))}};const N=(0,v.A)(S,[["__scopeId","data-v-f4bf6e84"]]);var x=N;const C=e=>((0,i.Qi)("data-v-1ef35160"),e=e(),(0,i.jt)(),e),I={class:"bar-line"},_={class:"chord-line"},E=C((()=>(0,i.Lk)("div",{class:"note-item"},null,-1))),O={class:"note-item"},z={key:0,class:"chord-box"},B={class:"bar-content"},M=C((()=>(0,i.Lk)("div",{class:"bar-start"},[(0,i.Lk)("div",{class:"bar-start-top"}),(0,i.Lk)("div",{class:"bar-start-center"}),(0,i.Lk)("div",{class:"bar-start-bottom"})],-1))),D={class:"string-line"},X={class:"note-item"},w=C((()=>(0,i.Lk)("div",{class:"note-tab"},[(0,i.Lk)("span",{class:"note-tab-text"},"T"),(0,i.Lk)("span",{class:"note-tab-text"},"A"),(0,i.Lk)("span",{class:"note-tab-text"},"B")],-1))),K={class:"note-string"},F=["id"],R={key:0,class:"note-tab note-tab-end"},P={class:"note-string"},$={class:"number-line"},A=C((()=>(0,i.Lk)("div",{class:"note-item"},null,-1))),Q={class:"note-item"},q={class:"number-box"},j={class:"note-number"};var H={__name:"bar",props:{item:{required:!0},speed:{required:!0,type:Number}},setup(e,{expose:t}){const r=e,a={},s=(e,t)=>{a[e]=t},l=e=>a[e];return t({getTapNumber:l}),(e,t)=>((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",_,[E,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.item.noteList,(e=>((0,i.uX)(),(0,i.CE)("div",O,[e.beginChord?((0,i.uX)(),(0,i.CE)("div",z,[(0,i.bF)(p,{name:e.chordName},null,8,["name"])])):(0,i.Q3)("",!0)])))),256))]),(0,i.Lk)("div",B,[M,(0,i.Lk)("div",null,[(0,i.Lk)("div",D,[(0,i.Lk)("div",X,[(0,i.Lk)("div",null,[w,((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(6,(e=>(0,i.Lk)("div",K))),64))])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.item.noteList,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e._key,class:"note-item",id:e._key},[t===r.item.noteList.length-1?((0,i.uX)(),(0,i.CE)("div",R)):(0,i.Q3)("",!0),((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(6,(a=>(0,i.Lk)("div",P,[e.string===a?((0,i.uX)(),(0,i.Wv)((0,n.R1)(x),{key:0,duration:6e4/r.speed,value:e.fret,itemKey:e._key,ref_for:!0,ref:e=>s(t,e)},null,8,["duration","value","itemKey"])):(0,i.Q3)("",!0)]))),64))],8,F)))),128))]),(0,i.Lk)("div",$,[A,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.item.noteList,(e=>((0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",q,[(0,i.Lk)("div",{class:(0,o.C4)(["number-dot",e.topDot?"number-dot-show":""])},null,2),(0,i.Lk)("div",{class:(0,o.C4)(["number-half",e.half?"number-half-show":""])},[(0,i.Lk)("span",j,(0,o.v_)(e.number),1)],2),(0,i.Lk)("div",{class:(0,o.C4)(["number-dot",e.bottomDot?"number-dot-show":""])},null,2)])])))),256))])])])]))}};const W=(0,v.A)(H,[["__scopeId","data-v-1ef35160"]]);var G=W;const V=e=>((0,i.Qi)("data-v-7264b93e"),e=e(),(0,i.jt)(),e),J={style:{width:"100%",height:"100%"}},U={style:{display:"flex","flex-direction":"column",height:"100%"}},Y=V((()=>(0,i.Lk)("div",{style:{width:"100%"}},[(0,i.Lk)("div",{style:{"background-color":"white",height:"10vh",width:"100%"}})],-1))),Z={class:"note-page"},ee={class:"bar-group"},te={class:"bar-group"},re=V((()=>(0,i.Lk)("div",{style:{width:"100%"}},[(0,i.Lk)("div",{style:{"background-color":"white",height:"10vh",width:"100%"}})],-1)));var ie={__name:"index",setup(e){const t=(0,n.KR)(),r=(0,n.Kh)({ready:!1,speed:120,barBeat:4,beatNote:1/4,minBeatNote:1/8,noteRate:[2,2,6,3],maxFret:3,barStack0:[],barStack1:[]}),a={intervalRunTime:0,interval:void 0,barLength:2,intervalTime:5,barRef0:{},barRef1:{},runningTapNum:{}},o=(e,t)=>{a.barRef0[e]=t},l=(e,t)=>{a.barRef1[e]=t};let c=0;const u=e=>(c++,void 0===e&&(e="NoteItem"),`${e}_${c}`),d=()=>{let e=[];for(let t=0;t<a.barLength;t++){let t=[],i=r.barBeat*r.beatNote,n=0,a=r.barBeat*r.beatNote/r.minBeatNote,o=0,l=0;while(n<a){const e=n*r.minBeatNote;if(o>e)e%r.beatNote===0?t.push(-1):t.push(0);else{let e=m();e<=i?i-=e:(e=i,i=0),t.push(e),l+=1,o+=e}n++}let c=f(l);const d=u("barKey");let g={_key:d,noteList:[]},b=0;for(let e=0;e<t.length;e++){let r=t[e];const i=u("noteItem");if(r>0){let e=c[b],t=s().pitchNames[e.string-1][e.fret];g.noteList.push({_key:i,note:r,...e,...t}),b++}else g.noteList.push({_key:i,note:r})}e.push(g)}1===v.stackIndex&&(r.barStack0=e),0===v.stackIndex&&(r.barStack1=e)},f=e=>{let t,i=[],n=s().enabledChord.length,a=0;for(let o=0;o<e;o++){let l=!1;if(a<1){let c=(0===o||Math.random()>.5)&&e-o>1;if(c){let e=Math.floor(Math.random()*n);l=!0,t=s().enabledChord[e];let r=s().chordMap[t].length;a=2+Math.floor(Math.random()*(r-1))}else i.push({fret:Math.floor(Math.random()*(r.maxFret+1)),string:Math.ceil(6*Math.random())})}if(a>0){let e=s().chordMap[t],r=s().chordMap[t].length,n=Math.floor(Math.random()*r),o=e[n];i.push({beginChord:l,chordName:t,fret:o.fret,string:o.string}),a--}}return i},m=()=>{let e=0,t=0;for(let n=0;n<r.noteRate.length;n++){let i=r.noteRate[n]*Math.random();i>t&&(t=i,e=n)}let i=1/(1<<e);return i},g=()=>{r.ready&&v.tickOfStack!==v.barTickSize||d()},b=()=>{if(v.tickIndex<v.barTickSize)return;const e=t.value.children[0],r=t.value.children[1],i=v.tickOfStack>=v.barTickSize?v.tickOfStack-v.barTickSize:(a.barLength-1)*v.barTickSize+v.tickOfStack,n=v.stackTickSize,s=0===v.stackIndex&&0===v.barOfStack||1===v.stackIndex&&v.barOfStack>0;if(s){let a=e.clientHeight+r.clientHeight-t.value.clientHeight,s=r.clientHeight*i/n-a;e.style=`margin-bottom:${s}px`,t.value.style="flex-direction: column-reverse;"}else{let r=-e.clientHeight*i/n;e.style=`margin-top:${r}px`,t.value.style="flex-direction: column;"}},k=()=>{if(1===v.tickOfMinNote){const e=0===v.stackIndex?a.barRef0[v.barOfStack]?.getTapNumber(v.minNoteOfBar):a.barRef1[v.barOfStack]?.getTapNumber(v.minNoteOfBar);if(e&&!e.isRunning()){e.run();const t=e.getItemKey();a.runningTapNum[t]=e,e.setEndMethod((()=>{delete a.runningTapNum[t]}))}}},v={ready:!1,tickIndex:-1,tickOfMinNote:-1,tickOfBar:-1,tickOfStack:-1,minNoteTickSize:-1,barTickSize:-1,stackTickSize:-1,barMinNoteSize:-1,barOfStack:-1,minNoteOfBar:-1,stackIndex:1},h=()=>{if(v.tickIndex+=1,!v.ready){const e=6e4/r.speed/r.beatNote*r.minBeatNote;v.minNoteTickSize=e/a.intervalTime,v.barTickSize=v.minNoteTickSize*r.barBeat*r.beatNote/r.minBeatNote,v.barMinNoteSize=v.barTickSize/v.minNoteTickSize,v.stackTickSize=v.barTickSize*a.barLength,v.ready=!0}v.tickOfMinNote=v.tickIndex%v.minNoteTickSize,v.tickOfBar=v.tickIndex%v.barTickSize,v.tickOfStack=v.tickIndex%v.stackTickSize,0===v.tickOfStack?(v.barOfStack=0,v.stackIndex=1-v.stackIndex):0===v.tickOfBar&&(v.barOfStack+=1),0===v.tickOfBar?v.minNoteOfBar=0:0===v.tickOfMinNote&&(v.minNoteOfBar+=1)},p=()=>{if(void 0!==a.interval)return clearInterval(a.interval),a.interval=void 0,void Object.keys(a.runningTapNum).forEach((e=>{a.runningTapNum[e].pause()}));Object.keys(a.runningTapNum).forEach((e=>{a.runningTapNum[e].run()})),a.interval=setInterval((()=>{y(),a.intervalRunTime+=a.intervalTime}),a.intervalTime)},y=()=>{h(),g(),b(),k()};return(0,i.sV)((()=>{d(),y(),r.ready=!0})),(e,a)=>((0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",U,[Y,(0,i.Lk)("div",Z,[(0,i.Lk)("div",{class:"note-table",ref_key:"noteTable",ref:t,onClick:p},[(0,i.Lk)("div",ee,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.barStack0,((e,t)=>((0,i.uX)(),(0,i.Wv)((0,n.R1)(G),{item:e,speed:r.speed,ref_for:!0,ref:e=>o(t,e)},null,8,["item","speed"])))),256))]),(0,i.Lk)("div",te,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.barStack1,((e,t)=>((0,i.uX)(),(0,i.Wv)((0,n.R1)(G),{item:e,speed:r.speed,ref_for:!0,ref:e=>l(t,e)},null,8,["item","speed"])))),256))])],512)]),re])]))}};const ne=(0,v.A)(ie,[["__scopeId","data-v-7264b93e"]]);var ae=ne}}]);
//# sourceMappingURL=924.93da282c.js.map