(self["webpackChunkgutar"]=self["webpackChunkgutar"]||[]).push([[458],{958:function(e){e.exports={chordMap:{C:[{fret:1,string:2,finger:1},{fret:2,string:4,finger:2},{fret:3,string:5,finger:3}],D:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],E:[{fret:1,string:3,finger:1},{fret:2,string:4,finger:2},{fret:2,string:5,finger:3}],F:[{fret:1,string:1,finger:1},{fret:1,string:2,finger:1},{fret:1,string:6,finger:1},{fret:2,string:3,finger:2},{fret:3,string:5,finger:3},{fret:3,string:4,finger:3}],G:[{fret:2,string:5,finger:2},{fret:3,string:6,finger:3},{fret:3,string:1,finger:4}],A:[{fret:2,string:4,finger:2},{fret:2,string:3,finger:3},{fret:2,string:2,finger:4}],B:[{fret:2,string:1,finger:1},{fret:2,string:5,finger:1},{fret:2,string:6,finger:1},{fret:4,string:2,finger:2},{fret:4,string:3,finger:3},{fret:4,string:4,finger:4}],Am:[{fret:1,string:2,finger:1},{fret:2,string:3,finger:2},{fret:2,string:4,finger:3}],Dm:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],Em:[{fret:2,string:4,finger:1},{fret:2,string:5,finger:2}]},enabledChord:["C","D","E","F","G","A","B","Am","Dm","Em"],pitchNames:[[{number:3,topDot:1},{number:4,topDot:1},{number:4,topDot:1,half:1},{number:5,topDot:1}],[{number:7},{number:1,topDot:1},{number:1,topDot:1,half:1},{number:2,half:1}],[{number:5},{number:5,half:1},{number:6},{number:6,half:1}],[{number:2},{number:2,half:1},{number:3},{number:4}],[{number:6,bottomDot:1},{number:6,bottomDot:1,half:1},{number:7,bottomDot:1},{number:1}],[{number:3,bottomDot:1},{number:4,bottomDot:1},{number:4,bottomDot:1,half:1},{number:5,bottomDot:1}]]}},1458:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return be}});var n=r(6768),i=r(4232),a=r(144),s=(r(4114),r(958)),o=r.n(s);let l=0;const c=e=>(l++,void 0===e&&(e="NoteItem"),`${e}_${l}`),u=({barLength:e,barBeat:t,beatNote:r,minBeatNote:n,maxFret:i,noteRate:a})=>{let s=[];for(let l=0;l<e;l++){let e=[],l=t*r,u=0,m=t*r/n,g=0,b=0;while(u<m){const t=u*n;if(g>t)t%r===0?e.push(-1):e.push(0);else{let t=d(a);t<=l?l-=t:(t=l,l=0),e.push(t),b+=1,g+=t}u++}let k=f(b,i);const v=c("barKey");let p={_key:v,noteList:[]},h=0;for(let t=0;t<e.length;t++){let r=e[t];const n=c("noteItem");if(r>0){let e=k[h],t=o().pitchNames[e.string-1][e.fret];p.noteList.push({_key:n,note:r,...e,...t}),h++}else p.noteList.push({_key:n,note:r})}s.push(p)}return s},f=(e,t)=>{let r,n=[],i=o().enabledChord.length,a=0;for(let s=0;s<e;s++){let l=!1;if(a<1){let c=(0===s||Math.random()>.5)&&e-s>1;if(c){let e=Math.floor(Math.random()*i);l=!0,r=o().enabledChord[e];let t=o().chordMap[r].length;a=2+Math.floor(Math.random()*(t-1))}else n.push({fret:Math.floor(Math.random()*(t+1)),string:Math.ceil(6*Math.random())})}if(a>0){let e=o().chordMap[r],t=o().chordMap[r].length,i=Math.floor(Math.random()*t),s=e[i];n.push({beginChord:l,chordName:r,fret:s.fret,string:s.string}),a--}}return n},d=e=>{let t=0,r=0;for(let i=0;i<e.length;i++){let n=e[i]*Math.random();n>r&&(r=n,t=i)}let n=1/(1<<t);return n};var m={getRandomBarArr:u};const g=e=>((0,n.Qi)("data-v-2eb72a0d"),e=e(),(0,n.jt)(),e),b={class:"chord-box"},k={class:"chord-name"},v={class:"chord-content"},p=g((()=>(0,n.Lk)("div",{class:"chord-sign"},null,-1))),h={class:"chord-table"},L={class:"chord-fret"},S={key:0,class:"string-dot"};var T={__name:"chord",props:{name:{required:!0,type:String}},setup(e){const t=(0,a.Kh)({maxFret:3,fretInfo:{}}),r=e,o=()=>{const e=s.chordMap[r.name];if(void 0===e)return;let n={},i=0;for(let t=0;t<e.length;t++){const r=e[t].fret;i=r>i?r:i;const a=e[t].string,s=e[t].finger;void 0===n[r]&&(n[r]={}),n[r][a]=s}t.maxFret=i<3?3:i,t.fretInfo=n};return o(),(r,a)=>((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",k,(0,i.v_)(e.name),1),(0,n.Lk)("div",v,[p,(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.maxFret,(e=>((0,n.uX)(),(0,n.CE)("div",L,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(r=>(0,n.Lk)("div",{class:(0,i.C4)(["chord-string",6===r?"chord-string-last":""])},[t.fretInfo[e]&&void 0!==t.fretInfo[e][7-r]?((0,n.uX)(),(0,n.CE)("div",S)):(0,n.Q3)("",!0)],2))),64))])))),256))])])]))}},N=r(1241);const x=(0,N.A)(T,[["__scopeId","data-v-2eb72a0d"]]);var y=x;const C={class:"item"},I={class:"item-animation"},_={class:"score-name"};var B={__name:"tap-number",props:{value:{required:!0,type:Number},duration:{required:!0,type:Number},itemKey:{required:!0,type:String}},setup(e,{expose:t}){const r=["miss","good","great","perfect"],s=(new Date).getTime(),o=(0,a.Kh)({result:void 0,continueTime:0,scoreBoxSize:0,isPause:!0,start:!1});let l=()=>{};const c=e,u=e=>{if(o.isPause||void 0!==o.result)return;o.continueTime=(new Date).getTime()-s;const t=o.continueTime/c.duration,n=t>=1?0:1-t,i=20+Math.floor(20*n);o.scoreBoxSize=i+i%2,o.result=r[e],l()};let f,d=0,m=0;const g=()=>{o.start=!0,o.isPause&&(o.isPause=!1,m=(new Date).getTime(),f=setTimeout((()=>{u(0)}),c.duration-d))},b=()=>{o.isPause||(o.isPause=!0,void 0!==f&&clearTimeout(f),d=(new Date).getTime()-m)},k=()=>{o.isPause?g():b()},v=()=>!o.isPause,p=e=>{l=e},h=()=>c.itemKey;return t({setScore:u,isRunning:v,run:g,pause:b,togglePause:k,setEndMethod:p,getItemKey:h}),(t,r)=>((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",I,[o.start&&void 0===o.result?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,i.C4)(["item-circle",o.isPause?"animation-pause":"animation-running"]),style:(0,i.Tr)({animation:`circle-close ${c.duration/1e3}s linear`})},null,6)):(0,n.Q3)("",!0),void 0!==o.result?((0,n.uX)(),(0,n.CE)("div",{key:1,style:(0,i.Tr)(`width:${o.scoreBoxSize}px;height:${o.scoreBoxSize}px;margin-top:${1-o.scoreBoxSize/2}px`),class:(0,i.C4)(["item-result",`item-result-${o.result}`])},[(0,n.Lk)("span",_,(0,i.v_)(o.result),1)],6)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",{class:(0,i.C4)(void 0!==o.result?`number-${o.result}`:"")},(0,i.v_)(e.value),3)]))}};const E=(0,N.A)(B,[["__scopeId","data-v-7f44a16a"]]);var O=E;const M=e=>((0,n.Qi)("data-v-75c23a98"),e=e(),(0,n.jt)(),e),z={class:"bar-line"},X={class:"chord-line"},D=M((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),K={class:"note-item"},R={key:0,class:"chord-box"},F={class:"bar-content"},w=M((()=>(0,n.Lk)("div",{class:"bar-start"},[(0,n.Lk)("div",{class:"bar-start-top"}),(0,n.Lk)("div",{class:"bar-start-center"}),(0,n.Lk)("div",{class:"bar-start-bottom"})],-1))),A={class:"string-line"},P={class:"note-item"},$=M((()=>(0,n.Lk)("div",{class:"note-tab"},[(0,n.Lk)("span",{class:"note-tab-text"},"T"),(0,n.Lk)("span",{class:"note-tab-text"},"A"),(0,n.Lk)("span",{class:"note-tab-text"},"B")],-1))),Q={class:"note-string"},q=["id"],j={class:"note-string"},H={class:"number-line"},W=M((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),G={class:"note-item"},V={class:"number-box"},J={class:"note-number"};var U={__name:"bar",props:{item:{required:!0},speed:{required:!0,type:Number}},setup(e,{expose:t}){const r=e,s={},o=(e,t)=>{s[e]=t},l=e=>s[e];return t({getTapNumber:l}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",z,[(0,n.Lk)("div",X,[D,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,(e=>((0,n.uX)(),(0,n.CE)("div",K,[e.beginChord?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.bF)(y,{name:e.chordName},null,8,["name"])])):(0,n.Q3)("",!0)])))),256))]),(0,n.Lk)("div",F,[w,(0,n.Lk)("div",null,[(0,n.Lk)("div",A,[(0,n.Lk)("div",P,[(0,n.Lk)("div",null,[$,((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(e=>(0,n.Lk)("div",Q))),64))])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:e._key,class:"note-item",id:e._key},[(0,n.Lk)("div",{class:(0,i.C4)(t===r.item.noteList.length-1?"note-tab-end":"")},[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(i=>(0,n.Lk)("div",j,[e.string===i?((0,n.uX)(),(0,n.Wv)((0,a.R1)(O),{key:0,duration:6e4/r.speed,value:e.fret,itemKey:e._key,ref_for:!0,ref:e=>o(t,e)},null,8,["duration","value","itemKey"])):(0,n.Q3)("",!0)]))),64))],2)],8,q)))),128))]),(0,n.Lk)("div",H,[W,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,(e=>((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("div",V,[(0,n.Lk)("div",{class:(0,i.C4)(["number-dot",e.topDot?"number-dot-show":""])},null,2),(0,n.Lk)("div",{class:(0,i.C4)(["number-half",e.half?"number-half-show":""])},[(0,n.Lk)("span",J,(0,i.v_)(e.number),1)],2),(0,n.Lk)("div",{class:(0,i.C4)(["number-dot",e.bottomDot?"number-dot-show":""])},null,2)])])))),256))])])])]))}};const Y=(0,N.A)(U,[["__scopeId","data-v-75c23a98"]]);var Z=Y;const ee=e=>((0,n.Qi)("data-v-b1e5a6ac"),e=e(),(0,n.jt)(),e),te={style:{height:"100%",padding:"0 10px"}},re={style:{display:"flex","flex-direction":"column",height:"100%"}},ne={class:"page-head"},ie={class:"page-title"},ae={class:"page-info"},se={class:"page-info-line"},oe={class:"page-info-line"},le=ee((()=>(0,n.Lk)("div",{class:"page-info-line"},"Capo = 1",-1))),ce={class:"note-page"},ue={class:"bar-group"},fe={class:"bar-group"},de=ee((()=>(0,n.Lk)("div",{class:"page-foot"},null,-1)));var me={__name:"index",setup(e){const t=(0,a.KR)(),r=(0,a.Kh)({ready:!1,title:"EMO",speed:60,barBeat:4,beatNote:1/4,minBeatNote:1/8,noteRate:[2,2,6,3],maxFret:3,barStack0:[],barStack1:[]}),s={intervalRunTime:0,interval:void 0,barLength:10,intervalTime:5,barRef0:{},barRef1:{},runningTapNum:{}},o=(e,t)=>{s.barRef0[e]=t},l=(e,t)=>{s.barRef1[e]=t},c=()=>{let e=m.getRandomBarArr({barLength:s.barLength,barBeat:r.barBeat,beatNote:r.beatNote,minBeatNote:r.minBeatNote,maxFret:r.maxFret,noteRate:r.noteRate});1===g.stackIndex&&(r.barStack0=e),0===g.stackIndex&&(r.barStack1=e)},u=()=>{r.ready&&g.tickOfStack!==g.barTickSize||c()},f=()=>{if(g.tickIndex<g.barTickSize)return;const e=t.value.children[0],r=t.value.children[1],n=g.tickOfStack>=g.barTickSize?g.tickOfStack-g.barTickSize:(s.barLength-1)*g.barTickSize+g.tickOfStack,i=g.stackTickSize,a=0===g.stackIndex&&0===g.barOfStack||1===g.stackIndex&&g.barOfStack>0;if(a){let a=e.clientHeight+r.clientHeight-t.value.clientHeight,s=r.clientHeight*n/i-a;e.style=`margin-bottom:${s}px`,t.value.style="flex-direction: column-reverse;"}else{let r=-e.clientHeight*n/i;e.style=`margin-top:${r}px`,t.value.style="flex-direction: column;"}},d=()=>{if(1===g.tickOfMinNote){const e=0===g.stackIndex?s.barRef0[g.barOfStack]?.getTapNumber(g.minNoteOfBar):s.barRef1[g.barOfStack]?.getTapNumber(g.minNoteOfBar);if(e&&!e.isRunning()){e.run();const t=e.getItemKey();s.runningTapNum[t]=e,e.setEndMethod((()=>{delete s.runningTapNum[t]}))}}},g={ready:!1,tickIndex:-1,tickOfMinNote:-1,tickOfBar:-1,tickOfStack:-1,minNoteTickSize:-1,barTickSize:-1,stackTickSize:-1,barMinNoteSize:-1,barOfStack:-1,minNoteOfBar:-1,stackIndex:1},b=()=>{if(g.tickIndex+=1,!g.ready){const e=6e4/r.speed/r.beatNote*r.minBeatNote;g.minNoteTickSize=e/s.intervalTime,g.barTickSize=g.minNoteTickSize*r.barBeat*r.beatNote/r.minBeatNote,g.barMinNoteSize=g.barTickSize/g.minNoteTickSize,g.stackTickSize=g.barTickSize*s.barLength,g.ready=!0}g.tickOfMinNote=g.tickIndex%g.minNoteTickSize,g.tickOfBar=g.tickIndex%g.barTickSize,g.tickOfStack=g.tickIndex%g.stackTickSize,0===g.tickOfStack?(g.barOfStack=0,g.stackIndex=1-g.stackIndex):0===g.tickOfBar&&(g.barOfStack+=1),0===g.tickOfBar?g.minNoteOfBar=0:0===g.tickOfMinNote&&(g.minNoteOfBar+=1)},k=()=>{if(void 0!==s.interval)return clearInterval(s.interval),s.interval=void 0,void Object.keys(s.runningTapNum).forEach((e=>{s.runningTapNum[e].pause()}));Object.keys(s.runningTapNum).forEach((e=>{s.runningTapNum[e].run()})),s.interval=setInterval((()=>{v(),s.intervalRunTime+=s.intervalTime}),s.intervalTime)},v=()=>{b(),u(),f(),d()};return(0,n.sV)((()=>{c(),v(),r.ready=!0})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",re,[(0,n.Lk)("div",ne,[(0,n.Lk)("div",ie,(0,i.v_)(r.title),1),(0,n.Lk)("div",ae,[(0,n.Lk)("div",se,"1 = C "+(0,i.v_)(r.barBeat)+"/"+(0,i.v_)(Math.floor(1/r.beatNote)),1),(0,n.Lk)("div",oe,"♪ = "+(0,i.v_)(r.speed),1),le])]),(0,n.Lk)("div",ce,[(0,n.Lk)("div",{class:"note-table",ref_key:"noteTable",ref:t,onClick:k},[(0,n.Lk)("div",ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.barStack0,((e,t)=>((0,n.uX)(),(0,n.Wv)((0,a.R1)(Z),{item:e,speed:r.speed,ref_for:!0,ref:e=>o(t,e)},null,8,["item","speed"])))),256))]),(0,n.Lk)("div",fe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.barStack1,((e,t)=>((0,n.uX)(),(0,n.Wv)((0,a.R1)(Z),{item:e,speed:r.speed,ref_for:!0,ref:e=>l(t,e)},null,8,["item","speed"])))),256))])],512)]),de])]))}};const ge=(0,N.A)(me,[["__scopeId","data-v-b1e5a6ac"]]);var be=ge}}]);
//# sourceMappingURL=458.565859fe.js.map