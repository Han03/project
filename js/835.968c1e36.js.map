{"version":3,"file":"js/835.968c1e36.js","mappings":"kYAqBA,MAAMA,EAAY,CAAC,OAAQ,OAAQ,QAAS,WACtCC,GAAY,IAAIC,MAAOC,UAEvBC,GAAQC,EAAAA,EAAAA,IAAS,CACrBC,YAAQC,EACRC,aAAc,EACdC,aAAc,IAGVC,EAAQC,EAWRC,EAAYC,IAChB,QAAqBN,IAAjBH,EAAME,OAAsB,OAChCF,EAAMI,cAAe,IAAIN,MAAOC,UAAYF,EAC5C,MAAMa,EAAOV,EAAMI,aAAeE,EAAMK,SAClCC,EAAOF,GAAQ,EAAI,EAAI,EAAIA,EAC3BG,EAAU,GAAKC,KAAKC,MAAM,GAAKH,GACrCZ,EAAMK,aAAeQ,EAAUA,EAAU,EACzCb,EAAME,OAASN,EAAUa,EAAM,E,OAGjCO,YAAW,KACTR,EAAS,EAAE,GACVF,EAAMK,UAETM,EAAa,CACXT,a,4oBCjDF,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,+GCAA,MAAMC,EAAe,GAEfC,EAAmBC,IACvBF,EAAaG,KAAKD,EAAI,E,OAGxBE,EAAAA,EAAAA,KAAU,KACR,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAaM,OAAQD,IACvCR,YAAW,KACTG,EAAaK,GAAGhB,SAAS,EAAIgB,EAAI,EAAE,GAClC,KAAQ,EAAIA,GACjB,I,oLCjBF,MAAM,EAAc,EAEpB,O","sources":["webpack://gutar/./src/page/guitar/tap-number.vue","webpack://gutar/./src/page/guitar/tap-number.vue?3ee0","webpack://gutar/./src/page/test/index.vue","webpack://gutar/./src/page/test/index.vue?f377"],"sourcesContent":["<template>\r\n  <div class=\"item\">\r\n    <div class=\"item-animation\">\r\n      <div v-if=\"state.result===undefined\" class=\"item-circle\"\r\n           :style=\"{ 'animation': `circle-close ${props.duration/1000}s linear` }\">\r\n      </div>\r\n      <div v-if=\"state.result!==undefined\"\r\n           :style=\"`width:${state.scoreBoxSize}px;height:${state.scoreBoxSize}px;margin-top:${1-state.scoreBoxSize/2}px`\"\r\n           class=\"item-result\"\r\n           :class=\"`item-result-${state.result}`\">\r\n        <span class=\"score-name\">{{ state.result }}</span>\r\n      </div>\r\n    </div>\r\n    <span style=\"display:block;width: 100%;\" :class=\"state.result!==undefined?`number-${state.result}`:''\">{{\r\n        value\r\n      }}</span>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport {defineProps, onMounted, reactive} from \"vue\";\r\n\r\nconst scoreName = ['miss', 'good', 'great', 'perfect']\r\nconst beginTime = new Date().getTime();\r\n\r\nconst state = reactive({\r\n  result: undefined,\r\n  continueTime: 0,\r\n  scoreBoxSize: 0\r\n});\r\n\r\nconst props = defineProps({\r\n  value: {\r\n    required: true,\r\n    type: Number\r\n  },\r\n  duration: {\r\n    required: true,\r\n    type: Number\r\n  }\r\n})\r\n\r\nconst setScore = (score) => {\r\n  if (state.result !== undefined) return;\r\n  state.continueTime = new Date().getTime() - beginTime;\r\n  const rate = state.continueTime / props.duration;\r\n  const left = rate >= 1 ? 0 : 1 - rate;\r\n  const boxSize = 20 + Math.floor(20 * left);\r\n  state.scoreBoxSize = boxSize + boxSize % 2;\r\n  state.result = scoreName[score];\r\n}\r\n\r\nsetTimeout(() => {\r\n  setScore(0);\r\n}, props.duration)\r\n\r\ndefineExpose({\r\n  setScore\r\n})\r\n\r\n</script>\r\n<style lang=\"less\">\r\n@keyframes circle-close {\r\n  0% {\r\n    border: 1px solid #3f3f3f;\r\n    width: 40px;\r\n    height: 40px;\r\n    margin-top: -19px;\r\n  }\r\n  100% {\r\n    border: 1px solid #3f3f3f;\r\n    width: 20px;\r\n    height: 20px;\r\n    margin-top: -9px;\r\n  }\r\n}\r\n\r\n@keyframes score-show {\r\n  0% {\r\n    opacity: 100%;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\" scoped>\r\n\r\n.item {\r\n  width: 20px;\r\n  height: 2px;\r\n  margin: 10px 0;\r\n  text-align: center;\r\n  line-height: 2px;\r\n}\r\n\r\n.item-animation {\r\n  width: 100%;\r\n  height: 0;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  .item-circle {\r\n    border-radius: 100%;\r\n    align-items: center;\r\n    flex-shrink: 0;\r\n  }\r\n}\r\n\r\n.item-result {\r\n  opacity: 0;\r\n  border-radius: 100%;\r\n  animation: score-show 0.8s linear;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n\r\n  .score-name {\r\n    line-height: 12px;\r\n    color: white;\r\n    transform: scale(0.6);\r\n    margin-left: -3px;\r\n  }\r\n}\r\n\r\n.item-result-miss {\r\n  font-size: 12px;\r\n  background-color: #afb6b6;\r\n}\r\n\r\n.item-result-good {\r\n  font-size: 13px;\r\n  background-color: #c6ffff;\r\n}\r\n\r\n.item-result-great {\r\n  font-size: 14px;\r\n  background-color: #76ffff;\r\n}\r\n\r\n.item-result-perfect {\r\n  font-size: 12px;\r\n  background-color: #00ffff;\r\n}\r\n\r\n.number-miss {\r\n  color: #afb6b6;\r\n}\r\n\r\n.number-good {\r\n  color: #008bda;\r\n}\r\n\r\n.number-great {\r\n  color: #008bda;\r\n}\r\n\r\n.number-perfect {\r\n  color: #008bda;\r\n}\r\n</style>\r\n","import script from \"./tap-number.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tap-number.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tap-number.vue?vue&type=style&index=0&id=d0f9b1da&lang=less\"\nimport \"./tap-number.vue?vue&type=style&index=1&id=d0f9b1da&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d0f9b1da\"]])\n\nexport default __exports__","<template>\r\n  <div style=\"width: 40px;display: flex;flex-wrap: wrap;padding: 20px\">\r\n    <TapNumber v-for=\"i in 4\" :value=\"i\" :duration=\"1000\" :ref=\"el => setTapNumberRef(el)\"></TapNumber>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport TapNumber from \"@/page/guitar/tap-number\";\r\nimport {onMounted} from \"vue\";\r\n\r\nconst tapNumberRef = [];\r\n\r\nconst setTapNumberRef = (ref) => {\r\n  tapNumberRef.push(ref)\r\n}\r\n\r\nonMounted(() => {\r\n  for (let i = 0; i < tapNumberRef.length; i++) {\r\n    setTimeout(() => {\r\n      tapNumberRef[i].setScore(3 - i % 3);\r\n    }, 1000 / (4 - i))\r\n  }\r\n})\r\n</script>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["scoreName","beginTime","Date","getTime","state","reactive","result","undefined","continueTime","scoreBoxSize","props","__props","setScore","score","rate","duration","left","boxSize","Math","floor","setTimeout","__expose","__exports__","tapNumberRef","setTapNumberRef","ref","push","onMounted","i","length"],"sourceRoot":""}