(self["webpackChunkgutar"]=self["webpackChunkgutar"]||[]).push([[104],{958:function(e){e.exports={chordMap:{C:[{fret:1,string:2,finger:1},{fret:2,string:4,finger:2},{fret:3,string:5,finger:3}],D:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],E:[{fret:1,string:3,finger:1},{fret:2,string:4,finger:2},{fret:2,string:5,finger:3}],F:[{fret:1,string:1,finger:1},{fret:1,string:2,finger:1},{fret:1,string:6,finger:1},{fret:2,string:3,finger:2},{fret:3,string:5,finger:3},{fret:3,string:4,finger:3}],G:[{fret:2,string:5,finger:2},{fret:3,string:6,finger:3},{fret:3,string:1,finger:4}],A:[{fret:2,string:4,finger:2},{fret:2,string:3,finger:3},{fret:2,string:2,finger:4}],B:[{fret:2,string:1,finger:1},{fret:2,string:5,finger:1},{fret:2,string:6,finger:1},{fret:4,string:2,finger:2},{fret:4,string:3,finger:3},{fret:4,string:4,finger:4}],Am:[{fret:1,string:2,finger:1},{fret:2,string:3,finger:2},{fret:2,string:4,finger:3}],Dm:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],Em:[{fret:2,string:4,finger:1},{fret:2,string:5,finger:2}]},enabledChord:["C","D","E","F","G","A","B","Am","Dm","Em"],pitchNames:[[{number:3,topDot:1},{number:4,topDot:1},{number:4,topDot:1,half:1},{number:5,topDot:1}],[{number:7},{number:1,topDot:1},{number:1,topDot:1,half:1},{number:2,half:1}],[{number:5},{number:5,half:1},{number:6},{number:6,half:1}],[{number:2},{number:2,half:1},{number:3},{number:4}],[{number:6,bottomDot:1},{number:6,bottomDot:1,half:1},{number:7,bottomDot:1},{number:1}],[{number:3,bottomDot:1},{number:4,bottomDot:1},{number:4,bottomDot:1,half:1},{number:5,bottomDot:1}]]}},9104:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});r(4114);var n=r(6768),i=r(144),a=r(4232),s=r(958),o=r.n(s);const l=e=>((0,n.Qi)("data-v-2eb72a0d"),e=e(),(0,n.jt)(),e),u={class:"chord-box"},d={class:"chord-name"},c={class:"chord-content"},f=l((()=>(0,n.Lk)("div",{class:"chord-sign"},null,-1))),g={class:"chord-table"},m={class:"chord-fret"},v={key:0,class:"string-dot"};var b={__name:"chord",props:{name:{required:!0,type:String}},setup(e){const t=(0,i.Kh)({maxFret:3,fretInfo:{}}),r=e,o=()=>{const e=s.chordMap[r.name];if(void 0===e)return;let n={},i=0;for(let t=0;t<e.length;t++){const r=e[t].fret;i=r>i?r:i;const a=e[t].string,s=e[t].finger;void 0===n[r]&&(n[r]={}),n[r][a]=s}t.maxFret=i<3?3:i,t.fretInfo=n};return o(),(r,i)=>((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",d,(0,a.v_)(e.name),1),(0,n.Lk)("div",c,[f,(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.maxFret,(e=>((0,n.uX)(),(0,n.CE)("div",m,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(r=>(0,n.Lk)("div",{class:(0,a.C4)(["chord-string",6===r?"chord-string-last":""])},[t.fretInfo[e]&&void 0!==t.fretInfo[e][7-r]?((0,n.uX)(),(0,n.CE)("div",v)):(0,n.Q3)("",!0)],2))),64))])))),256))])])]))}},h=r(1241);const p=(0,h.A)(b,[["__scopeId","data-v-2eb72a0d"]]);var k=p,L=r(8374);const C=e=>((0,n.Qi)("data-v-21c3d0a4"),e=e(),(0,n.jt)(),e),x={style:{display:"flex","flex-direction":"column",height:"100%"}},y=C((()=>(0,n.Lk)("div",{style:{width:"100%"}},[(0,n.Lk)("div",{style:{"background-color":"white",height:"10vh",width:"100%"}})],-1))),T={class:"note-page"},D={class:"bar-line"},E={class:"chord-line"},X=C((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),w={key:0,class:"chord-box"},M={class:"bar-content"},_=C((()=>(0,n.Lk)("div",{class:"bar-start"},[(0,n.Lk)("div",{class:"bar-start-top"}),(0,n.Lk)("div",{class:"bar-start-center"}),(0,n.Lk)("div",{class:"bar-start-bottom"})],-1))),I={class:"string-line"},N={class:"note-item"},B=C((()=>(0,n.Lk)("div",{class:"note-tab"},[(0,n.Lk)("span",{class:"note-tab-text"},"T"),(0,n.Lk)("span",{class:"note-tab-text"},"A"),(0,n.Lk)("span",{class:"note-tab-text"},"B")],-1))),F={class:"note-string"},S={class:"note-item"},K={key:0,class:"note-tab-end"},$=C((()=>(0,n.Lk)("span",{class:"note-tab-text"}," ",-1))),A=C((()=>(0,n.Lk)("span",{class:"note-tab-text"}," ",-1))),R=C((()=>(0,n.Lk)("span",{class:"note-tab-text"}," ",-1))),P=[$,A,R],Q={class:"number-line"},z=C((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),q={class:"note-item"},j={class:"number-box"},G={class:"note-number"},H=C((()=>(0,n.Lk)("div",{style:{width:"100%"}},[(0,n.Lk)("div",{style:{"background-color":"white",height:"10vh",width:"100%"}})],-1)));var V={__name:"index",setup(e){const t=(0,i.KR)(),r={},s=(e,t,n)=>{void 0===r[e]&&(r[e]={}),r[e][t]=n},l=(0,i.Kh)({activeNote:[0,0],interval:void 0,intervalTime:10,intervalRunTime:0,speed:60,barBeat:4,beatNote:1/4,minBeatNote:1/8,noteRate:[2,2,6,3],maxFret:3,barStack:[],barLength:10});let u=0;const d=()=>(u++,`NoteItem_${u}`),c=e=>{for(let t=0;t<e;t++){let e=[],t=l.barBeat*l.beatNote,r=0,n=l.barBeat*l.beatNote/l.minBeatNote,i=0,a=0;while(r<n){const n=r*l.minBeatNote;if(i>n)n%l.beatNote===0?e.push(-1):e.push(0);else{let r=g();r<=t?t-=r:(r=t,t=0),e.push(r),a+=1,i+=r}r++}let s=f(a),u=[],d=0;for(let l=0;l<e.length;l++){let t=e[l];if(t>0){let e=s[d],r=o().pitchNames[e.string-1][e.fret];u.push({note:t,...e,...r}),d++}else u.push({note:t})}l.barStack.length>=l.barLength&&l.barStack.splice(0,1),l.barStack.push(u)}},f=e=>{let t,r=[],n=o().enabledChord.length,i=0;for(let a=0;a<e;a++){let s=!1;if(i<1){let u=(0===a||Math.random()>.5)&&e-a>1;if(u){let e=Math.floor(Math.random()*n);s=!0,t=o().enabledChord[e];let r=o().chordMap[t].length;i=2+Math.floor(Math.random()*(r-1))}else r.push({fret:Math.floor(Math.random()*(l.maxFret+1)),string:Math.ceil(6*Math.random())})}if(i>0){let e=o().chordMap[t],n=o().chordMap[t].length,a=Math.floor(Math.random()*n),l=e[a];r.push({beginChord:s,chordName:t,fret:l.fret,string:l.string}),i--}}return r},g=()=>{let e=0,t=0;for(let n=0;n<l.noteRate.length;n++){let r=l.noteRate[n]*Math.random();r>t&&(t=r,e=n)}let r=1/(1<<e);return r},m=()=>{if(l.barStack.length<l.barLength)c(l.barLength-l.barStack.length);else{const e=6e4/l.speed*l.barBeat;l.intervalRunTime%e<l.intervalTime&&c(1)}},v=()=>{const e=6e4/l.speed*l.barBeat;if(t.value.children[0]){let r=t.value.children[0].clientHeight,n=l.intervalRunTime%e/e*r;t.value.style=`margin-top:${-n}px`}};let b=-1;const h=()=>{const e=1,t=6e4/l.speed/l.beatNote*l.minBeatNote,n=Math.floor(l.intervalRunTime/t);if(n!==b){b=n;const t=l.barStack[e][n];if(console.log(`[${e},${b}] -> {fret:${void 0!==t?t.fret:"undefined"}`),void 0!==t&&t.fret>-1){const t=r[e][b];t&&t.togglePause()}}},p=()=>{if(void 0!==l.interval)return clearInterval(l.interval),void(l.interval=void 0);l.interval=setInterval((()=>{m(),v(),h(),l.intervalRunTime+=l.intervalTime}),l.intervalTime)};return(0,n.sV)((()=>{c(l.barLength-l.barStack.length-1)})),(e,r)=>((0,n.uX)(),(0,n.CE)("div",x,[y,(0,n.Lk)("div",T,[(0,n.Lk)("div",{class:"note-table",ref_key:"noteTable",ref:t,onClick:p},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.barStack,((e,t)=>((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("div",E,[X,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"note-item",key:d()},[e.beginChord?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.bF)(k,{name:e.chordName},null,8,["name"])])):(0,n.Q3)("",!0)])))),128))]),(0,n.Lk)("div",M,[_,(0,n.Lk)("div",null,[(0,n.Lk)("div",I,[(0,n.Lk)("div",N,[(0,n.Lk)("div",null,[B,((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(e=>(0,n.Lk)("div",F))),64))])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,((r,a)=>((0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("div",null,[a===e.length-1?((0,n.uX)(),(0,n.CE)("div",K,P)):(0,n.Q3)("",!0),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(e=>(0,n.Lk)("div",{class:"note-string",key:d()},[r.string===e?((0,n.uX)(),(0,n.Wv)((0,i.R1)(L.A),{key:0,duration:6e4/l.speed,value:r.fret,ref_for:!0,ref:e=>s(t,a,e)},null,8,["duration","value"])):(0,n.Q3)("",!0)]))),64))])])))),256))]),(0,n.Lk)("div",Q,[z,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e=>((0,n.uX)(),(0,n.CE)("div",q,[(0,n.Lk)("div",j,[(0,n.Lk)("div",{class:(0,a.C4)(["number-dot",e.topDot?"number-dot-show":""])},null,2),(0,n.Lk)("div",{class:(0,a.C4)(["number-half",e.half?"number-half-show":""])},[(0,n.Lk)("span",G,(0,a.v_)(e.number),1)],2),(0,n.Lk)("div",{class:(0,a.C4)(["number-dot",e.bottomDot?"number-dot-show":""])},null,2)])])))),256))])])])])))),256))],512)]),H]))}};const W=(0,h.A)(V,[["__scopeId","data-v-21c3d0a4"]]);var J=W},8374:function(e,t,r){"use strict";r.d(t,{A:function(){return f}});var n=r(6768),i=r(4232),a=r(144);const s={class:"item"},o={class:"item-animation"},l={class:"score-name"};var u={__name:"tap-number",props:{value:{required:!0,type:Number},duration:{required:!0,type:Number},delay:{required:!1,default:0,type:Number}},setup(e,{expose:t}){const r=["miss","good","great","perfect"],u=(new Date).getTime(),d=(0,a.Kh)({result:void 0,continueTime:0,scoreBoxSize:0,start:!1,isPause:!0}),c=e,f=e=>{if(d.isPause||!d.start||void 0!==d.result)return;d.continueTime=(new Date).getTime()-u;const t=d.continueTime/c.duration,n=t>=1?0:1-t,i=20+Math.floor(20*n);d.scoreBoxSize=i+i%2,d.result=r[e]};let g,m=0,v=0;const b=()=>{void 0!==g&&clearTimeout(g),d.isPause=!d.isPause,d.isPause?m=(new Date).getTime()-v:(v=(new Date).getTime(),c.delay>m?g=setTimeout((()=>{L()}),c.delay-m):L())};let h,p=0,k=0;const L=()=>{d.start=!0,void 0!==h&&clearTimeout(h),d.isPause?p=(new Date).getTime()-k:(k=(new Date).getTime(),h=setTimeout((()=>{f(0)}),c.duration-p))};return t({setScore:f,togglePause:b}),(t,r)=>((0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",o,[d.start&&void 0===d.result?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,i.C4)(["item-circle",d.isPause?"animation-pause":"animation-running"]),style:(0,i.Tr)({animation:`circle-close ${c.duration/1e3}s linear`})},null,6)):(0,n.Q3)("",!0),void 0!==d.result?((0,n.uX)(),(0,n.CE)("div",{key:1,style:(0,i.Tr)(`width:${d.scoreBoxSize}px;height:${d.scoreBoxSize}px;margin-top:${1-d.scoreBoxSize/2}px`),class:(0,i.C4)(["item-result",`item-result-${d.result}`])},[(0,n.Lk)("span",l,(0,i.v_)(d.result),1)],6)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",{style:{display:"block",width:"100%"},class:(0,i.C4)(void 0!==d.result?`number-${d.result}`:"")},(0,i.v_)(e.value),3)]))}},d=r(1241);const c=(0,d.A)(u,[["__scopeId","data-v-3e3fe5ee"]]);var f=c}}]);
//# sourceMappingURL=104.259950ac.js.map