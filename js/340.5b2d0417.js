(self["webpackChunkgutar"]=self["webpackChunkgutar"]||[]).push([[340],{958:function(e){e.exports={chordMap:{C:[{fret:1,string:2,finger:1},{fret:2,string:4,finger:2},{fret:3,string:5,finger:3}],D:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],E:[{fret:1,string:3,finger:1},{fret:2,string:4,finger:2},{fret:2,string:5,finger:3}],F:[{fret:1,string:1,finger:1},{fret:1,string:2,finger:1},{fret:1,string:6,finger:1},{fret:2,string:3,finger:2},{fret:3,string:5,finger:3},{fret:3,string:4,finger:3}],G:[{fret:2,string:5,finger:2},{fret:3,string:6,finger:3},{fret:3,string:1,finger:4}],A:[{fret:2,string:4,finger:2},{fret:2,string:3,finger:3},{fret:2,string:2,finger:4}],B:[{fret:2,string:1,finger:1},{fret:2,string:5,finger:1},{fret:2,string:6,finger:1},{fret:4,string:2,finger:2},{fret:4,string:3,finger:3},{fret:4,string:4,finger:4}],Am:[{fret:1,string:2,finger:1},{fret:2,string:3,finger:2},{fret:2,string:4,finger:3}],Dm:[{fret:2,string:1,finger:1},{fret:2,string:3,finger:2},{fret:3,string:2,finger:3}],Em:[{fret:2,string:4,finger:1},{fret:2,string:5,finger:2}]},enabledChord:["C","D","E","F","G","A","B","Am","Dm","Em"],pitchNames:[[{number:3,topDot:1},{number:4,topDot:1},{number:4,topDot:1,half:1},{number:5,topDot:1}],[{number:7},{number:1,topDot:1},{number:1,topDot:1,half:1},{number:2,half:1}],[{number:5},{number:5,half:1},{number:6},{number:6,half:1}],[{number:2},{number:2,half:1},{number:3},{number:4}],[{number:6,bottomDot:1},{number:6,bottomDot:1,half:1},{number:7,bottomDot:1},{number:1}],[{number:3,bottomDot:1},{number:4,bottomDot:1},{number:4,bottomDot:1,half:1},{number:5,bottomDot:1}]]}},5340:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ke}});var n=r(6768),i=r(4232),a=r(144),s=(r(4114),r(958)),o=r.n(s);let l=0;const c=e=>(l++,void 0===e&&(e="NoteItem"),`${e}_${l}`),u=({barLength:e,barBeat:t,beatNote:r,minBeatNote:n,maxFret:i,noteRate:a})=>{let s=[];for(let l=0;l<e;l++){let e=[],l=t*r,u=0,m=t*r/n,g=0,k=0;while(u<m){const t=u*n;if(g>t)t%r===0?e.push(-1):e.push(0);else{let t=f(a);t<=l?l-=t:(t=l,l=0),e.push(t),k+=1,g+=t}u++}let b=d(k,i);const p=c("barKey");let v={_key:p,noteList:[]},h=0;for(let t=0;t<e.length;t++){let r=e[t];const n=c("noteItem");if(r>0){let e=b[h],t=o().pitchNames[e.string-1][e.fret];v.noteList.push({_key:n,note:r,...e,...t}),h++}else v.noteList.push({_key:n,note:r})}s.push(v)}return s},d=(e,t)=>{let r,n=[],i=o().enabledChord.length,a=0;for(let s=0;s<e;s++){let l=!1;if(a<1){let c=(0===s||Math.random()>.5)&&e-s>1;if(c){let e=Math.floor(Math.random()*i);l=!0,r=o().enabledChord[e];let t=o().chordMap[r].length;a=2+Math.floor(Math.random()*(t-1))}else n.push({fret:Math.floor(Math.random()*(t+1)),string:Math.ceil(6*Math.random())})}if(a>0){let e=o().chordMap[r],t=o().chordMap[r].length,i=Math.floor(Math.random()*t),s=e[i];n.push({beginChord:l,chordName:r,fret:s.fret,string:s.string}),a--}}return n},f=e=>{let t=0,r=0;for(let i=0;i<e.length;i++){let n=e[i]*Math.random();n>r&&(r=n,t=i)}let n=1/(1<<t);return n};var m={getRandomBarArr:u};const g=e=>((0,n.Qi)("data-v-2eb72a0d"),e=e(),(0,n.jt)(),e),k={class:"chord-box"},b={class:"chord-name"},p={class:"chord-content"},v=g((()=>(0,n.Lk)("div",{class:"chord-sign"},null,-1))),h={class:"chord-table"},L={class:"chord-fret"},S={key:0,class:"string-dot"};var T={__name:"chord",props:{name:{required:!0,type:String}},setup(e){const t=(0,a.Kh)({maxFret:3,fretInfo:{}}),r=e,o=()=>{const e=s.chordMap[r.name];if(void 0===e)return;let n={},i=0;for(let t=0;t<e.length;t++){const r=e[t].fret;i=r>i?r:i;const a=e[t].string,s=e[t].finger;void 0===n[r]&&(n[r]={}),n[r][a]=s}t.maxFret=i<3?3:i,t.fretInfo=n};return o(),(r,a)=>((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",b,(0,i.v_)(e.name),1),(0,n.Lk)("div",p,[v,(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.maxFret,(e=>((0,n.uX)(),(0,n.CE)("div",L,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(r=>(0,n.Lk)("div",{class:(0,i.C4)(["chord-string",6===r?"chord-string-last":""])},[t.fretInfo[e]&&void 0!==t.fretInfo[e][7-r]?((0,n.uX)(),(0,n.CE)("div",S)):(0,n.Q3)("",!0)],2))),64))])))),256))])])]))}},x=r(1241);const N=(0,x.A)(T,[["__scopeId","data-v-2eb72a0d"]]);var C=N;const y={class:"item"},I={class:"item-animation"},_={class:"score-name"};var B={__name:"tap-number",props:{value:{required:!0,type:Number},duration:{required:!0,type:Number},itemKey:{required:!0,type:String}},setup(e,{expose:t}){const r=["miss","good","great","perfect"],s=(new Date).getTime(),o=(0,a.Kh)({result:void 0,continueTime:0,scoreBoxSize:0,isPause:!0,start:!1});let l=()=>{};const c=e,u=e=>{if(o.isPause||void 0!==o.result)return;o.continueTime=(new Date).getTime()-s;const t=o.continueTime/c.duration,n=t>=1?0:1-t,i=20+Math.floor(20*n);o.scoreBoxSize=i+i%2,o.result=r[e],l()};let d,f=0,m=0;const g=()=>{o.start=!0,o.isPause&&(o.isPause=!1,m=(new Date).getTime(),d=setTimeout((()=>{u(0)}),c.duration-f))},k=()=>{o.isPause||(o.isPause=!0,void 0!==d&&clearTimeout(d),f=(new Date).getTime()-m)},b=()=>{o.isPause?g():k()},p=()=>!o.isPause,v=e=>{l=e},h=()=>c.itemKey;return t({setScore:u,isRunning:p,run:g,pause:k,togglePause:b,setEndMethod:v,getItemKey:h}),(t,r)=>((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",I,[o.start&&void 0===o.result?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,i.C4)(["item-circle",o.isPause?"animation-pause":"animation-running"]),style:(0,i.Tr)({animation:`circle-close ${c.duration/1e3}s linear`})},null,6)):(0,n.Q3)("",!0),void 0!==o.result?((0,n.uX)(),(0,n.CE)("div",{key:1,style:(0,i.Tr)(`width:${o.scoreBoxSize}px;height:${o.scoreBoxSize}px;margin-top:${1-o.scoreBoxSize/2}px`),class:(0,i.C4)(["item-result",`item-result-${o.result}`])},[(0,n.Lk)("span",_,(0,i.v_)(o.result),1)],6)):(0,n.Q3)("",!0)]),(0,n.Lk)("span",{class:(0,i.C4)(void 0!==o.result?`number-${o.result}`:"")},(0,i.v_)(e.value),3)]))}};const O=(0,x.A)(B,[["__scopeId","data-v-7f44a16a"]]);var E=O;const M=e=>((0,n.Qi)("data-v-2d24c1d7"),e=e(),(0,n.jt)(),e),z={class:"bar-line"},X={class:"chord-line"},D=M((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),K={class:"note-item"},R={key:0,class:"chord-box"},F={class:"bar-content"},A=M((()=>(0,n.Lk)("div",{class:"bar-start"},[(0,n.Lk)("div",{class:"bar-start-top"}),(0,n.Lk)("div",{class:"bar-start-center"}),(0,n.Lk)("div",{class:"bar-start-bottom"})],-1))),w={class:"string-line"},P={class:"note-item"},$=M((()=>(0,n.Lk)("div",{class:"note-tab"},[(0,n.Lk)("span",{class:"note-tab-text"},"T"),(0,n.Lk)("span",{class:"note-tab-text"},"A"),(0,n.Lk)("span",{class:"note-tab-text"},"B")],-1))),Q={class:"note-string"},q=["id"],j={class:"note-string"},H={class:"number-line"},W=M((()=>(0,n.Lk)("div",{class:"note-item"},null,-1))),G={class:"note-item"},V={class:"number-box"},J={class:"note-number"};var U={__name:"bar",props:{item:{required:!0},speed:{required:!0,type:Number}},setup(e,{expose:t}){const r=e,s={},o=(e,t)=>{s[e]=t},l=e=>s[e];return t({getTapNumber:l}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",z,[(0,n.Lk)("div",X,[D,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,(e=>((0,n.uX)(),(0,n.CE)("div",K,[e.beginChord?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.bF)(C,{name:e.chordName},null,8,["name"])])):(0,n.Q3)("",!0)])))),256))]),(0,n.Lk)("div",F,[A,(0,n.Lk)("div",null,[(0,n.Lk)("div",w,[(0,n.Lk)("div",P,[(0,n.Lk)("div",null,[$,((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(e=>(0,n.Lk)("div",Q))),64))])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:e._key,class:"note-item",id:e._key},[(0,n.Lk)("div",{class:(0,i.C4)(t===r.item.noteList.length-1?"note-tab-end":"")},[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(6,(i=>(0,n.Lk)("div",j,[e.string===i?((0,n.uX)(),(0,n.Wv)((0,a.R1)(E),{key:0,duration:6e4/r.speed,value:e.fret,itemKey:e._key,ref_for:!0,ref:e=>o(t,e)},null,8,["duration","value","itemKey"])):(0,n.Q3)("",!0)]))),64))],2)],8,q)))),128))]),(0,n.Lk)("div",H,[W,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.item.noteList,(e=>((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("div",V,[(0,n.Lk)("div",{class:(0,i.C4)(["number-dot",e.topDot?"number-dot-show":""])},null,2),(0,n.Lk)("div",{class:(0,i.C4)(["number-half",e.half?"number-half-show":""])},[(0,n.Lk)("span",J,(0,i.v_)(e.number),1)],2),(0,n.Lk)("div",{class:(0,i.C4)(["number-dot",e.bottomDot?"number-dot-show":""])},null,2)])])))),256))])])])]))}};const Y=(0,x.A)(U,[["__scopeId","data-v-2d24c1d7"]]);var Z=Y;const ee=e=>((0,n.Qi)("data-v-71590628"),e=e(),(0,n.jt)(),e),te={style:{height:"100%",padding:"0 10px"}},re={style:{display:"flex","flex-direction":"column",height:"100%"}},ne={class:"page-head"},ie={class:"page-title"},ae={class:"page-info"},se={class:"page-info-line"},oe=ee((()=>(0,n.Lk)("div",{class:"page-info-line"},"Capo = 1",-1))),le={class:"note-page"},ce={class:"bar-group"},ue={class:"bar-group"},de={class:"page-foot"},fe={class:"page-number"};var me={__name:"index",setup(e){const t=(0,a.KR)(),r=(0,a.Kh)({ready:!1,title:"EMO",speed:60,barBeat:4,beatNote:1/4,minBeatNote:1/8,noteRate:[0,1,2,4,8],maxFret:3,barStack0:[],barStack1:[],barCount:0}),s={intervalRunTime:0,interval:void 0,barLength:10,intervalTime:5,barRef0:{},barRef1:{},runningTapNum:{},speedArr:[60,80,100,120,180],lineBarSize:1},o=(e,t)=>{s.barRef0[e]=t},l=(e,t)=>{s.barRef1[e]=t},c=()=>{if(k.tickIndex>0)return;let e=0;for(let t in s.speedArr){if(r.speed===s.speedArr[s.speedArr.length-1]){e=s.speedArr[0];break}if(r.speed<s.speedArr[t]){e=s.speedArr[t];break}}r.speed=e,k.ready=!1},u=()=>{let e=m.getRandomBarArr({barLength:s.barLength,barBeat:r.barBeat,beatNote:r.beatNote,minBeatNote:r.minBeatNote,maxFret:r.maxFret,noteRate:r.noteRate});1===k.stackIndex&&(r.barStack0=e),0===k.stackIndex&&(r.barStack1=e)},d=()=>{r.ready&&k.tickOfStack!==k.barTickSize||u()},f=()=>{if(k.tickIndex<k.barTickSize)return;const e=t.value.children[0],r=t.value.children[1],n=k.tickOfStack>=k.barTickSize?k.tickOfStack-k.barTickSize:(s.barLength-1)*k.barTickSize+k.tickOfStack,i=k.stackTickSize,a=0===k.stackIndex&&0===k.barOfStack||1===k.stackIndex&&k.barOfStack>0;if(a){let a=e.clientHeight+r.clientHeight-t.value.clientHeight,s=r.clientHeight*n/i-a;e.style=`margin-bottom:${s}px`,t.value.style="flex-direction: column-reverse;"}else{let r=-e.clientHeight*n/i;e.style=`margin-top:${r}px`,t.value.style="flex-direction: column;"}},g=()=>{if(1===k.tickOfMinNote){const e=0===k.stackIndex?s.barRef0[k.barOfStack]?.getTapNumber(k.minNoteOfBar):s.barRef1[k.barOfStack]?.getTapNumber(k.minNoteOfBar);if(e&&!e.isRunning()){e.run();const t=e.getItemKey();s.runningTapNum[t]=e,e.setEndMethod((()=>{delete s.runningTapNum[t]}))}}},k={ready:!1,tickIndex:-1,tickOfMinNote:-1,tickOfBar:-1,tickOfStack:-1,minNoteTickSize:-1,barTickSize:-1,stackTickSize:-1,barMinNoteSize:-1,barOfStack:-1,minNoteOfBar:-1,stackIndex:1},b=()=>{if(k.tickIndex+=1,!k.ready){const e=6e4/r.speed/r.beatNote*r.minBeatNote;k.minNoteTickSize=e/s.intervalTime,k.barTickSize=k.minNoteTickSize*r.barBeat*r.beatNote/r.minBeatNote,k.barMinNoteSize=k.barTickSize/k.minNoteTickSize,k.stackTickSize=k.barTickSize*s.barLength,k.ready=!0}k.tickOfMinNote=k.tickIndex%k.minNoteTickSize,k.tickOfBar=k.tickIndex%k.barTickSize,k.tickOfStack=k.tickIndex%k.stackTickSize,0===k.tickOfStack?(k.barOfStack=0,k.stackIndex=1-k.stackIndex):0===k.tickOfBar&&(k.barOfStack+=1),0===k.tickOfBar?k.minNoteOfBar=0:0===k.tickOfMinNote&&(k.minNoteOfBar+=1)},p=()=>{if(void 0!==s.interval)return clearInterval(s.interval),s.interval=void 0,void Object.keys(s.runningTapNum).forEach((e=>{s.runningTapNum[e].pause()}));Object.keys(s.runningTapNum).forEach((e=>{s.runningTapNum[e].run()})),s.interval=setInterval((()=>{h(),s.intervalRunTime+=s.intervalTime}),s.intervalTime)},v=()=>{0===k.tickOfBar&&(r.barCount+=1)},h=()=>{b(),d(),f(),g(),v()};return(0,n.sV)((()=>{u(),h(),r.ready=!0})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",re,[(0,n.Lk)("div",ne,[(0,n.Lk)("div",ie,(0,i.v_)(r.title),1),(0,n.Lk)("div",ae,[(0,n.Lk)("div",se,"1 = C "+(0,i.v_)(r.barBeat)+"/"+(0,i.v_)(Math.floor(1/r.beatNote)),1),(0,n.Lk)("div",{class:"page-info-line",onClick:c},"♪ = "+(0,i.v_)(r.speed),1),oe])]),(0,n.Lk)("div",le,[(0,n.Lk)("div",{class:"note-table",ref_key:"noteTable",ref:t,onClick:p},[(0,n.Lk)("div",ce,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.barStack0,((e,t)=>((0,n.uX)(),(0,n.Wv)((0,a.R1)(Z),{item:e,speed:r.speed,ref_for:!0,ref:e=>o(t,e)},null,8,["item","speed"])))),256))]),(0,n.Lk)("div",ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.barStack1,((e,t)=>((0,n.uX)(),(0,n.Wv)((0,a.R1)(Z),{item:e,speed:r.speed,ref_for:!0,ref:e=>l(t,e)},null,8,["item","speed"])))),256))])],512)]),(0,n.Lk)("div",de,[(0,n.Lk)("div",fe,"- "+(0,i.v_)(r.barCount)+" -",1)])])]))}};const ge=(0,x.A)(me,[["__scopeId","data-v-71590628"]]);var ke=ge}}]);
//# sourceMappingURL=340.5b2d0417.js.map